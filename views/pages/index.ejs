<!DOCTYPE html>
<html>
<head>
  <% include ../partials/header.ejs %>
</head>

<body>
<% include ../partials/nav.ejs %>
<div id="map"></div>   

<script>      
   var map;
   function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
         center: {lat: 4.65, lng: -74.1084},
         zoom: 12,
         streetViewControl: false
      });
   }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_pwJMzM3GRzJAFhIYOeThYGpIVp1W5pg&callback=initMap" async defer></script>
<% include ../partials/footer.ejs %>
<script src="/socket.io/socket.io.js"></script>
<script>
   var socket = io();
   var el = document.getElementById('timeLocal');
   socket.on('time', function(timeString) {
      el.innerHTML = timeString;
   });
   
   $(document).ready(function(){
      getWeather();
      setInterval(getWeather, 600000);
   });

   function getWeather(){
      $.simpleWeather({
         location: '02135',
         unit: 'c',
         success: function(weather) {
            html = weather.city+', '+weather.temp+'&deg;'+weather.units.temp;            
  
            $("#weather").html(html);
         },
         error: function(error) {
            $("#weather").html('<p>'+error+'</p>');
         }
      });
   }
</script>
</body>
</html>
