<!DOCTYPE html>
<html>
<head>
  <% include ../partials/header.ejs %>
<style>
/* Shrinking the sidebar from 250px to 80px and center aligining its content*/
#sidebar.active {
    min-width: 80px;
    max-width: 80px;
    text-align: center;
}

/* Toggling the sidebar header content, hide the big heading [h3] and showing the small heading [strong] and vice versa*/
#sidebar .sidebar-header strong {
    display: none;
}
#sidebar.active .sidebar-header h3 {
    display: none;
}
#sidebar.active .sidebar-header strong {
    display: block;
}

#sidebar ul li a {
    text-align: left;
}

#sidebar.active ul li a {
    padding: 20px 10px;
    text-align: center;
    font-size: 0.85em;
}

#sidebar.active ul li a i {
    margin-right:  0;
    display: block;
    font-size: 1.8em;
    margin-bottom: 5px;
}

/* Same dropdown links padding*/
#sidebar.active ul ul a {
    padding: 10px !important;
}

/* Changing the arrow position to bottom center position, 
   translateX(50%) works with right: 50% 
   to accurately  center the arrow */
#sidebar.active a[aria-expanded="false"]::before, #sidebar.active a[aria-expanded="true"]::before {
    top: auto;
    bottom: 5px;
    right: 50%;
    transform: translateX(50%);
}

@media (max-width: 768px) {
    /* 80px and its content aligned to centre. Pushing it off the screen with the
       negative left margin
    */
    #sidebar.active {
        min-width: 80px;
        max-width: 80px;
        text-align: center;
        margin-left: -80px !important;
    }


    /* Reappearing the sidebar on toggle button click */
    #sidebar {
        margin-left: 0; 
    }


    /* Toggling the sidebar header content, 
       hide the big heading [h3] and showing the small heading [strong] and vice versa
    */
    #sidebar .sidebar-header strong {
        display: none;
    }
    #sidebar.active .sidebar-header h3 {
        display: none;
    }
    #sidebar.active .sidebar-header strong {
        display: block;
    }

    /* Downsize the navigation links font size */
    #sidebar.active ul li a {
        padding: 20px 10px;
        font-size: 0.85em;
    }

    #sidebar.active ul li a i {
        margin-right:  0;
        display: block;
        font-size: 1.8em;
        margin-bottom: 5px;
    }

    /* Adjust the dropdown links padding*/
    #sidebar.active ul ul a {
        padding: 10px !important;
    }

    /* Changing the arrow position to bottom center position, 
      translateX(50%) works with right: 50% 
      to accurately  center the arrow */
    #sidebar.active a[aria-expanded="false"]::before, #sidebar.active a[aria-expanded="true"]::before {
        top: auto;
        bottom: 5px;
        right: 50%;
        transform: translateX(50%);
    }
}
</style>
</head>

<body>
<div id="wrapper">
   <% include ../partials/nav.ejs %>
   
   <div id="page-content-wrapper">
      <div class="container-fluid">
         <div class="row">
            <div class="col-lg-12">
               <div id="map"></div>
<% include ../partials/footer.ejs %>
            </div>
         </div>
      </div>   
   </div>         
</div>

<script>      
   var map;
   function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
         center: {lat: 4.65, lng: -74.1084},
         zoom: 12,
         streetViewControl: false
      });
   }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_pwJMzM3GRzJAFhIYOeThYGpIVp1W5pg&callback=initMap" async defer></script>

<script src="/socket.io/socket.io.js"></script>
<script>
   var socket = io();
   var el = document.getElementById('timeLocal');
   socket.on('time', function(timeString) {
      el.innerHTML = timeString;
   });
   
   $(document).ready(function(){
      getWeather();
      setInterval(getWeather, 600000);
   });

   function getWeather(){
      $.simpleWeather({
         location: 'Bogota, CO',
         unit: 'c',
         success: function(weather) {
            html = weather.city+', '+weather.temp+'&deg;'+weather.units.temp;            
  
            $("#weather").html(html);
         },
         error: function(error) {
            $("#weather").html('<p>'+error+'</p>');
         }
      });
   }

   $('#sidebarCollapse').on('click', function () {
        $('#sidebar').toggleClass('active');
    });
</script>
</body>
</html>
